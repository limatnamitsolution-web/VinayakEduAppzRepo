<div class="modal-overlay">
  <div class="modal-content modern-modal">
   
    <div class="tabs-nav">
      @for (tab of tabs; track tab.id) {
      <button 
              [class.active]="activeTab === tab.id" 
              (click)="setActiveTab(tab.id)"
              class="tab-link">
        {{ tab.label }}
      </button>
      }
    </div>

    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="form-layout">
      <div class="modal-body">
        <div formArrayName="tabs">
        
        <!-- Student Tab Content -->
        <div *ngIf="activeTab === 'Student'" [formGroupName]="0" class="tab-content fade-in">
          
          <div class="grid-2">
            <div class="form-section">
              <h3 class="section-title">Student Details</h3>
              <div class="grid-3">
                <!-- Row 1 -->
                <div class="form-field">
                  <label>Branch</label>
                  <select formControlName="adm_branch_Id">
                    <option value="">Select Branch</option>
                    @for (branch of branches; track branch.id) {
                    <option [value]="branch.id">{{ branch.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>Admission No</label>
                  <input type="text" formControlName="adm_no">
                </div>
                <div class="form-field">
                  <label>Admission Date</label>
                  <input type="date" formControlName="adm_date">
                </div>

                <!-- Row 2 -->
                <div class="form-field">
                  <label>Date of Joining</label>
                  <input type="date" formControlName="adm_doj">
                </div>
                <div class="form-field">
                  <label>First Name</label>
                  <input type="text" formControlName="sess_stud_first_name">
                </div>
                <div class="form-field">
                  <label>Last Name</label>
                  <input type="text" formControlName="sess_stud_last_name">
                </div>

                <!-- Row 3 -->
                <div class="form-field">
                  <label>SSR No</label>
                  <input type="text" formControlName="adm_ssr_no">
                </div>
                <div class="form-field">
                  <label>Date of Birth</label>
                  <input type="date" formControlName="adm_dob">
                </div>
                <div class="form-field">
                  <label>Gender</label>
                  <select formControlName="adm_gender_id">
                    <option value="">Select Gender</option>
                    @for (gender of genders; track gender.id) {
                    <option [value]="gender.id">{{ gender.name }}</option>
                    }
                  </select>
                </div>

                <!-- Row 4 -->
                <div class="form-field">
                  <label>Blood Group</label>
                  <select formControlName="adm_blood_grp_id">
                    <option value="">Select Group</option>
                    @for (bg of bloodGroups; track bg.id) {
                    <option [value]="bg.id">{{ bg.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>Religion</label>
                  <select formControlName="sess_religion_id">
                    <option value="">Select Religion</option>
                    @for (religion of religions; track religion.id) {
                    <option [value]="religion.id">{{ religion.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>Caste</label>
                  <select formControlName="sess_caste_id">
                    <option value="">Select Caste</option>
                    @for (caste of castes; track caste.id) {
                    <option [value]="caste.id">{{ caste.name }}</option>
                    }
                  </select>
                </div>

                <!-- Row 5 -->
                <div class="form-field">
                  <label>Mobile No</label>
                  <input type="text" formControlName="adm_stud_mobile_no">
                </div>
                <div class="form-field">
                  <label>Aadhar No</label>
                  <input type="text" formControlName="sess_student_aadhar_no">
                </div>
                <div class="form-field">
                  <label>Email Address</label>
                  <input type="text" formControlName="adm_stud_email_ddress">
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Academic Details</h3>
              <div class="grid-3">
                <div class="form-field">
                  <label>Class</label>
                  <select formControlName="currentClass">
                    <option value="">Select Class</option>
                    <option value="1">Class 1</option>
                    <option value="2">Class 2</option>
                    <option value="3">Class 3</option>
                  </select>
                </div>
                <div class="form-field">
                  <label>Section</label>
                  <select formControlName="currentSection">
                    <option value="">Select Section</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                  </select>
                </div>
                <div class="form-field">
                  <label>Roll Number</label>
                  <input type="text" formControlName="currentRollNo" placeholder="Roll No">
                </div>
                <div class="form-field">
                  <label>Admission Date</label>
                  <input type="date" formControlName="admissionDate">
                </div>
                <div class="form-field">
                  <label>Category</label>
                  <select formControlName="category">
                    <option value="">General</option>
                    <option value="OBC">OBC</option>
                    <option value="SC">SC</option>
                    <option value="ST">ST</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-2">
            <div class="form-section">
              <h3 class="section-title">Parent / Guardian Details</h3>
              <div class="grid-3">
                <div class="form-field">
                  <label>Father's Name</label>
                  <input type="text" formControlName="fatherName" placeholder="Full Name">
                </div>
                <div class="form-field">
                  <label>Father's Mobile</label>
                  <input type="text" formControlName="fatherMobile" placeholder="+91 ...">
                </div>
                <div class="form-field">
                  <label>Mother's Name</label>
                  <input type="text" formControlName="motherName" placeholder="Full Name">
                </div>
                <div class="form-field">
                  <label>Mother's Mobile</label>
                  <input type="text" formControlName="motherMobile" placeholder="+91 ...">
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Address Information</h3>
              <div class="grid-3">
                <div class="form-field full-width">
                  <label>Present Address</label>
                  <textarea formControlName="presentAddress" rows="2" placeholder="Street Address, City, State"></textarea>
                </div>
                <div class="form-field">
                  <label>City</label>
                  <input type="text" formControlName="presentCity">
                </div>
                <div class="form-field">
                  <label>Pincode</label>
                  <input type="text" formControlName="presentPincode">
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Parent's Tab Content -->
        <div *ngIf="activeTab === 'Parents'" [formGroupName]="1" class="tab-content fade-in">
          
          <div class="grid-2">
            <!-- Father Details -->
            <div class="form-section">
              <h3 class="section-title">Father Detail</h3>
              <div class="grid-3">
                <div class="form-field">
                  <label>Qualification</label>
                  <select formControlName="fatherQualification"><option value="">Select</option></select>
                </div>
                <div class="form-field">
                  <label>Occupation</label>
                  <select formControlName="fatherOccupation"><option value="">Select</option></select>
                </div>
                <div class="form-field">
                  <label>Designation</label>
                  <select formControlName="fatherDesignation"><option value="">Select</option></select>
                </div>
                <div class="form-field">
                  <label>Email</label>
                  <input type="email" formControlName="fatherEmail">
                </div>
                <div class="form-field">
                  <label>Office Address</label>
                  <input type="text" formControlName="fatherOfficeAddress">
                </div>
                <div class="form-field">
                  <label>Annual Income</label>
                  <input type="text" formControlName="fatherIncome">
                </div>
                <div class="form-field">
                  <label>Adhar Card No.</label>
                  <input type="text" formControlName="fatherAdhar">
                </div>
                <div class="form-field checkbox-field">
                  <label>
                    <input type="checkbox" formControlName="isFatherEmployee"> Is Father Campus Employee
                  </label>
                </div>
              </div>
            </div>

            <!-- Mother Details -->
            <div class="form-section">
              <h3 class="section-title">Mother Detail</h3>
              <div class="grid-3">
                <div class="form-field">
                  <label>Qualification</label>
                  <select formControlName="motherQualification"><option value="">Select</option></select>
                </div>
                <div class="form-field">
                  <label>Occupation</label>
                  <select formControlName="motherOccupation"><option value="">Select</option></select>
                </div>
                <div class="form-field">
                  <label>Designation</label>
                  <select formControlName="motherDesignation"><option value="">Select</option></select>
                </div>
                <div class="form-field">
                  <label>Email</label>
                  <input type="email" formControlName="motherEmail">
                </div>
                <div class="form-field">
                  <label>Office Address</label>
                  <input type="text" formControlName="motherOfficeAddress">
                </div>
                <div class="form-field">
                  <label>Annual Income</label>
                  <input type="text" formControlName="motherIncome">
                </div>
                <div class="form-field">
                  <label>Adhar Card No.</label>
                  <input type="text" formControlName="motherAdhar">
                </div>
                <div class="form-field checkbox-field">
                  <label>
                    <input type="checkbox" formControlName="isMotherEmployee"> Is Mother Campus Employee
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Guardian Details -->
          <div class="form-section">
            <h3 class="section-title">Guardian Details</h3>
            <div class="grid-3">
              <div class="form-field">
                <label>Guardian 1 Name</label>
                <input type="text" formControlName="guardian1Name">
              </div>
              <div class="form-field">
                <label>Guardian 1 Mobile</label>
                <input type="text" formControlName="guardian1Mobile">
              </div>
              <div class="form-field full-width">
                <label>Guardian 1 Address</label>
                <input type="text" formControlName="guardian1Address">
              </div>
              
              <div class="form-field">
                <label>Guardian 2 Name</label>
                <input type="text" formControlName="guardian2Name">
              </div>
              <div class="form-field">
                <label>Guardian 2 Mobile</label>
                <input type="text" formControlName="guardian2Mobile">
              </div>
              <div class="form-field full-width">
                <label>Guardian 2 Address</label>
                <input type="text" formControlName="guardian2Address">
              </div>
            </div>
          </div>

          <!-- Other Details -->
          <div class="form-section">
            <h3 class="section-title">Other Details</h3>
            <div class="form-field full-width">
              <textarea formControlName="otherDetails" rows="4" placeholder="Enter any other details here..."></textarea>
            </div>
          </div>
        </div>
      </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-text" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn-primary">Save Student</button>
      </div>
      </form>
  </div>
</div>
