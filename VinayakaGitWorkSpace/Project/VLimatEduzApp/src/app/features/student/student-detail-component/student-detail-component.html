<div class="modal-overlay">
  <div class="modal-content modern-modal">
   
    <div class="tabs-nav">
      @for (tab of tabs; track tab.id) {
      <button 
              [class.active]="activeTab === tab.id" 
              (click)="setActiveTab(tab.id)"
              class="tab-link">
        {{ tab.label }}
      </button>
      }
    </div>

    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="form-layout">
      <div class="modal-body">
        <div formArrayName="tabs">
        
        <!-- Student Tab Content -->
        <div *ngIf="activeTab === 'Student'" [formGroupName]="0" class="tab-content fade-in">
          
          <div class="form-section">
            <h3 class="section-title">Student Details</h3>
            <div class="grid-4">
              <!-- Row 1 -->
              <div class="form-field">
                <label>Branch</label>
                <select formControlName="adm_branch_Id">
                  <option value="">Select Branch</option>
                  @for (branch of branches; track branch.id) {
                  <option [value]="branch.id">{{ branch.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Admission No</label>
                <input type="text" formControlName="adm_no">
              </div>
              <div class="form-field">
                <label>Admission Date</label>
                <input type="date" formControlName="adm_date">
              </div>
              <div class="form-field">
                <label>Date of Joining</label>
                <input type="date" formControlName="adm_doj">
              </div>

              <!-- Row 2 -->
              <div class="form-field">
                <label>First Name</label>
                <input type="text" formControlName="sess_stud_first_name">
              </div>
              <div class="form-field">
                <label>Last Name</label>
                <input type="text" formControlName="sess_stud_last_name">
              </div>
              <div class="form-field">
                <label>SSR No</label>
                <input type="text" formControlName="adm_ssr_no">
              </div>
              <div class="form-field">
                <label>Date of Birth</label>
                <input type="date" formControlName="adm_dob">
              </div>

              <!-- Row 3 -->
              <div class="form-field">
                <label>Gender</label>
                <select formControlName="adm_gender_id">
                  <option value="">Select Gender</option>
                  @for (gender of genders; track gender.id) {
                  <option [value]="gender.id">{{ gender.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Blood Group</label>
                <select formControlName="adm_blood_grp_id">
                  <option value="">Select Group</option>
                  @for (bg of bloodGroups; track bg.id) {
                  <option [value]="bg.id">{{ bg.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Religion</label>
                <select formControlName="sess_religion_id">
                  <option value="">Select Religion</option>
                  @for (religion of religions; track religion.id) {
                  <option [value]="religion.id">{{ religion.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Caste</label>
                <select formControlName="sess_caste_id">
                  <option value="">Select Caste</option>
                  @for (caste of castes; track caste.id) {
                  <option [value]="caste.id">{{ caste.name }}</option>
                  }
                </select>
              </div>

              <!-- Row 4 -->
              <div class="form-field">
                <label>Mobile No</label>
                <input type="text" formControlName="adm_stud_mobile_no">
              </div>
              <div class="form-field">
                <label>Aadhar No</label>
                <input type="text" formControlName="sess_student_aadhar_no">
              </div>
                <div class="form-field">
                  <label>Email Address</label>
                  <input type="text" formControlName="adm_stud_email_ddress">
                </div>
              </div>
            </div>

          <div class="grid-2">
            <div class="form-section">
              <h3 class="section-title">Address Information</h3>
              <div class="grid-3">
                <!-- Row 1 -->
                <div class="form-field">
                  <label>Country</label>
                  <select formControlName="sess_country_id">
                    <option value="">Select Country</option>
                    @for (country of countries; track country.id) {
                    <option [value]="country.id">{{ country.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>State</label>
                  <select formControlName="sess_state_id">
                    <option value="">Select State</option>
                    @for (state of states; track state.id) {
                    <option [value]="state.id">{{ state.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>City</label>
                  <select formControlName="sess_city_id">
                    <option value="">Select City</option>
                    @for (city of cities; track city.id) {
                    <option [value]="city.id">{{ city.name }}</option>
                    }
                  </select>
                </div>

                <!-- Row 2 -->
                <div class="form-field span-2">
                  <label>Address</label>
                  <textarea formControlName="sess_address" placeholder="Enter Address" rows="3" style="resize: vertical;"></textarea>
                </div>
                <div class="form-field">
                  <label>Pin Code</label>
                  <input type="text" formControlName="sess_pin_code" placeholder="Enter Pin Code">
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Permanent Address Information</h3>
              <div class="grid-3">
                <!-- Row 1 -->
                <div class="form-field">
                  <label>Country</label>
                  <select formControlName="sess_permanent_country_id">
                    <option value="">Select Country</option>
                    @for (country of countries; track country.id) {
                    <option [value]="country.id">{{ country.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>State</label>
                  <select formControlName="sess_permanent_state_id">
                    <option value="">Select State</option>
                    @for (state of states; track state.id) {
                    <option [value]="state.id">{{ state.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>City</label>
                  <select formControlName="sess_permanent_city_id">
                    <option value="">Select City</option>
                    @for (city of cities; track city.id) {
                    <option [value]="city.id">{{ city.name }}</option>
                    }
                  </select>
                </div>

                <!-- Row 2 -->
                <div class="form-field span-2">
                  <label>Address</label>
                  <textarea formControlName="sess_permanent_address" placeholder="Enter Address" rows="3" style="resize: vertical;"></textarea>
                </div>
                <div class="form-field">
                  <label>Pin Code</label>
                  <input type="text" formControlName="sess_permanent_pin_code" placeholder="Enter Pin Code">
                </div>
              </div>
            </div>
          </div>
        </div>        <!-- Academic Tab Content -->
        <div *ngIf="activeTab === 'Academic'" [formGroupName]="1" class="tab-content fade-in">
          <!-- Admission Details Section -->
          <div class="form-section">
            <h3 class="section-title">Admission Details</h3>
            <div class="grid-4">
              <div class="form-field">
                <label>Admission Category</label>
                <select formControlName="adm_cat_id">
                  <option value="">Select Category</option>
                  @for (cat of categories; track cat.id) {
                  <option [value]="cat.id">{{ cat.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Admission Group</label>
                <select formControlName="adm_grp_id">
                  <option value="">Select Group</option>
                  @for (grp of groups; track grp.id) {
                  <option [value]="grp.id">{{ grp.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Admission Stream</label>
                <select formControlName="adm_stream_id">
                  <option value="">Select Stream</option>
                  @for (stream of streams; track stream.id) {
                  <option [value]="stream.id">{{ stream.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Admission Class</label>
                <select formControlName="adm_class_id">
                  <option value="">Select Class</option>
                  @for (cls of classes; track cls.id) {
                  <option [value]="cls.id">{{ cls.name }}</option>
                  }
                </select>
              </div>

              <div class="form-field">
                <label>Admission Section</label>
                <select formControlName="adm_section_id">
                  <option value="">Select Section</option>
                  @for (sec of sections; track sec.id) {
                  <option [value]="sec.id">{{ sec.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Admission Roll No</label>
                <input type="text" formControlName="adm_rollno">
              </div>
              <div class="form-field">
                <label>Admission Concession</label>
                <select formControlName="adm_concession_id">
                  <option value="">Select Concession</option>
                  @for (conc of concessions; track conc.id) {
                  <option [value]="conc.id">{{ conc.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Admission Fee Group</label>
                <select formControlName="adm_fee_group_id">
                  <option value="">Select Fee Group</option>
                  @for (fg of feeGroups; track fg.id) {
                  <option [value]="fg.id">{{ fg.name }}</option>
                  }
                </select>
              </div>
            </div>
          </div>

          <!-- Current Session Details Section -->
          <div class="form-section">
            <h3 class="section-title">Current Session Details</h3>
            <div class="grid-4">
              <div class="form-field">
                <label>Session Category</label>
                <select formControlName="sess_cat_id">
                  <option value="">Select Category</option>
                  @for (cat of categories; track cat.id) {
                  <option [value]="cat.id">{{ cat.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Session Group</label>
                <select formControlName="sess_grp_id">
                  <option value="">Select Group</option>
                  @for (grp of groups; track grp.id) {
                  <option [value]="grp.id">{{ grp.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Session Stream</label>
                <select formControlName="sess_stream_id">
                  <option value="">Select Stream</option>
                  @for (stream of streams; track stream.id) {
                  <option [value]="stream.id">{{ stream.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Session Class</label>
                <select formControlName="sess_class_id">
                  <option value="">Select Class</option>
                  @for (cls of classes; track cls.id) {
                  <option [value]="cls.id">{{ cls.name }}</option>
                  }
                </select>
              </div>

              <div class="form-field">
                <label>Session Section</label>
                <select formControlName="sess_section_id">
                  <option value="">Select Section</option>
                  @for (sec of sections; track sec.id) {
                  <option [value]="sec.id">{{ sec.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Session Roll No</label>
                <input type="text" formControlName="sess_roll_no">
              </div>
              <div class="form-field">
                <label>Session Concession</label>
                <select formControlName="sess_concession_id">
                  <option value="">Select Concession</option>
                  @for (conc of concessions; track conc.id) {
                  <option [value]="conc.id">{{ conc.name }}</option>
                  }
                </select>
              </div>
              <div class="form-field">
                <label>Session Fee Group</label>
                <select formControlName="sess_fee_group_id">
                  <option value="">Select Fee Group</option>
                  @for (fg of feeGroups; track fg.id) {
                  <option [value]="fg.id">{{ fg.name }}</option>
                  }
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Parent's Tab Content -->
        <div *ngIf="activeTab === 'Parents'" [formGroupName]="2" class="tab-content fade-in">
          
          <div class="grid-2">
            <!-- Father Details -->
            <div class="form-section">
              <h3 class="section-title">Father Details</h3>
              <div class="grid-4">
                <!-- Row 1 -->
                <div class="form-field">
                  <label>Father Name</label>
                  <input type="text" formControlName="sess_father_name">
                </div>
                <div class="form-field">
                  <label>Father Mobile No</label>
                  <input type="text" formControlName="sess_father_mobile_no">
                </div>
                <div class="form-field">
                  <label>Qualification</label>
                  <select formControlName="sess_father_qualification_id">
                    <option value="">Select</option>
                    @for (qual of qualifications; track qual.id) {
                    <option [value]="qual.id">{{ qual.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>Occupation</label>
                  <select formControlName="sess_father_occupation_id">
                    <option value="">Select</option>
                    @for (occ of occupations; track occ.id) {
                    <option [value]="occ.id">{{ occ.name }}</option>
                    }
                  </select>
                </div>

                <!-- Row 2 -->
                <div class="form-field">
                  <label>Designation</label>
                  <input type="text" formControlName="sess_father_designation_id">
                </div>
                <div class="form-field">
                  <label>Annual Income</label>
                  <input type="text" formControlName="sess_father_annual_income">
                </div>
                <div class="form-field">
                  <label>Office Address</label>
                  <input type="text" formControlName="sess_father_office_address">
                </div>
                <div class="form-field">
                  <label>Is Campus Employee</label>
                  <input type="checkbox" formControlName="sess_is_fse">
                </div>
              </div>
            </div>

            <!-- Mother Details -->
            <div class="form-section">
              <h3 class="section-title">Mother Detail</h3>
              <div class="grid-4">
                <!-- Row 1 -->
                <div class="form-field">
                  <label>Mother Name</label>
                  <input type="text" formControlName="sess_mother_name">
                </div>
                <div class="form-field">
                  <label>Mother Mobile No</label>
                  <input type="text" formControlName="sess_mother_mobile_no">
                </div>
                <div class="form-field">
                  <label>Qualification</label>
                  <select formControlName="sess_mother_qualification_id">
                    <option value="">Select</option>
                    @for (qual of qualifications; track qual.id) {
                    <option [value]="qual.id">{{ qual.name }}</option>
                    }
                  </select>
                </div>
                <div class="form-field">
                  <label>Occupation</label>
                  <select formControlName="sess_mother_occupation_id">
                    <option value="">Select</option>
                    @for (occ of occupations; track occ.id) {
                    <option [value]="occ.id">{{ occ.name }}</option>
                    }
                  </select>
                </div>

                <!-- Row 2 -->
                <div class="form-field">
                  <label>Designation</label>
                  <input type="text" formControlName="sess_mother_designation_id">
                </div>
                <div class="form-field">
                  <label>Annual Income</label>
                  <input type="text" formControlName="sess_mother_annual_income">
                </div>
                <div class="form-field">
                  <label>Office Address</label>
                  <input type="text" formControlName="sess_mother_office_address">
                </div>
                <div class="form-field">
                  <label>Is Campus Employee</label>
                  <input type="checkbox" formControlName="sess_is_mse">
                </div>
              </div>
            </div>
          </div>

          <!-- Guardian 1 Details -->
          <div class="form-section">
            <h3 class="section-title">Guardian 1 Details</h3>
            <div class="grid-3">
              <div class="form-field">
                <label>Name</label>
                <input type="text" formControlName="sess_g1_name">
              </div>
              <div class="form-field">
                <label>Mobile</label>
                <input type="text" formControlName="sess_g1_mobile_no">
              </div>
              <div class="form-field">
                <label>Address</label>
                <input type="text" formControlName="sess_g1_address">
              </div>
            </div>
          </div>

          <!-- Guardian 2 Details -->
          <div class="form-section">
            <h3 class="section-title">Guardian 2 Details</h3>
            <div class="grid-3">
              <div class="form-field">
                <label>Name</label>
                <input type="text" formControlName="sess_g2_name">
              </div>
              <div class="form-field">
                <label>Mobile</label>
                <input type="text" formControlName="sess_g2_mobile_no">
              </div>
              <div class="form-field">
                <label>Address</label>
                <input type="text" formControlName="sess_g2_address">
              </div>
            </div>
          </div>

          <!-- Other Details -->
          <div class="form-section">
            <h3 class="section-title">Other Details</h3>
            <div class="form-field full-width">
              <textarea formControlName="otherDetails" rows="4" placeholder="Enter any other details here..."></textarea>
            </div>
          </div>
        </div>
      </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-text" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn-primary">Save Student</button>
      </div>
      </form>
  </div>
</div>
